# /etc/sudoers.d/ai-runner
# ========================
# Restricted sudo privileges for the ai-runner user
#
# Setup:
#   1. Copy this file to /etc/sudoers.d/ai-runner
#   2. Set permissions: chmod 440 /etc/sudoers.d/ai-runner
#   3. Verify syntax: visudo -c -f /etc/sudoers.d/ai-runner
#
# WARNING: Incorrect syntax can break sudo entirely!
# Always use visudo or check syntax before applying.

# Systemd services (for specific services)
ai-runner ALL=(ALL) NOPASSWD: /bin/systemctl status myapp
ai-runner ALL=(ALL) NOPASSWD: /bin/systemctl restart myapp
ai-runner ALL=(ALL) NOPASSWD: /bin/systemctl stop myapp
ai-runner ALL=(ALL) NOPASSWD: /bin/systemctl start myapp
ai-runner ALL=(ALL) NOPASSWD: /bin/systemctl reload myapp

# Journal logs (only specific services)
ai-runner ALL=(ALL) NOPASSWD: /bin/journalctl -u myapp*

# Docker commands (if using Docker)
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/docker ps
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/docker logs *
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/docker stats
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/docker restart *

# Nginx (if web server management is needed)
# ai-runner ALL=(ALL) NOPASSWD: /bin/systemctl status nginx
# ai-runner ALL=(ALL) NOPASSWD: /bin/systemctl reload nginx
# ai-runner ALL=(ALL) NOPASSWD: /usr/sbin/nginx -t

# PM2 (Node.js process manager)
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/pm2 list
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/pm2 status
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/pm2 logs *
# ai-runner ALL=(ALL) NOPASSWD: /usr/bin/pm2 restart *

# FORBIDDEN: General root access
# ai-runner ALL=(ALL) NOPASSWD: ALL  # ‚ùå NEVER DO THIS!
